@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formSpouseQualification" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @*@Html.ValidationSummary(false, "", new { @class = "text-danger" })*@
        <div class="card mt-4">
            <div class="card-header" style="background-color:#fff">
                PROFESSIONAL QUALIFICATIONS 
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <input type="text" name="quSProfessionalEdu" id="quSProfessionalEdu_1" required title="Enter Professional Qualification" class="form-control" placeholder="Professional Qualification">
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" name="quSAcademicAchievement" id="quSAcademicAchievement_1" required title="Enter Academic Achievement" class="form-control" placeholder="Academic Achievement">
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" name="quSDivision" id="quSDivision_1" required title="Grade/Division" class="form-control" placeholder="Grade/Division">
                    </div>
                    <div class="form-group col-md-3">
                        <input type="text" name="quSInstitute" id="quSInstitute_1" required title="Enter Institute" class="form-control" placeholder="Institute">
                    </div>

                    <div class="form-group col-md-2">
                        <button type="button" class="add-SpouseQualification btn btn-outline-primary btn-sm"><i class="fa fa-plus"></i></button>
                        <button type="button" class="remove-SpouseQualification btn btn-outline-danger ml-2 btn-sm"><i class="fa fa-minus"></i> </button>
                    </div>
                </div>
            </div>
            <div id="new_quS"></div>
            <input type="hidden" value="1" id="total_quS">

            <div class="form-group mt-4 text-center">
                <div class="col-md-offset-2 col-md-10">
                    <input type="button" value="Submit" onclick="addSpouseQualifications()" class="btn btn-primary" />
                </div>
            </div>
        </div>
    </div>
}

<script>
    // #region Qualification
    function storeSpouseQualification() {
        let ttlrows = $('#total_quS').val();
        let qualifications = [];
        for (i = 1, j = 0; i <= ttlrows; i++ , j++) {
            qualifications[j] = {
                ProfessionalEdu: $('#quSProfessionalEdu_' + i).val(),
                AcademicAchievement: $('#quSAcademicAchievement_' + i).val(),
                Division: $('#quSDivision_' + i).val(),
                Institute: $('#quSInstitute_' + i).val(),
                SpouseId: $('#hdnSpouseId').val(),
            };
        }
        return qualifications;
    }
    $('.add-SpouseQualification').on('click', addSpouseQualification);
    $('.remove-SpouseQualification').on('click', removeQualification);
    function addSpouseQualification() {
        let new_row_no = parseInt($('#total_quS').val()) + 1;
        let new_row_inputs = `<div id="SpouseQualification_${new_row_no}" class="form-row">
                               <div class="form-group col-md-3">
                                   <input type="text" name="quSProfessionalEdu" id="quSProfessionalEdu_${new_row_no}" required title="Enter Professional Qualification" class="form-control" placeholder="Professional Qualification">
                               </div>
                               <div class="form-group col-md-2">
                                   <input type="text" name="quSAcademicAchievement" id="quSAcademicAchievement_${new_row_no}" required title="Enter Academic Achievement" class="form-control" placeholder="Academic Achievement">
                               </div>
                               <div class="form-group col-md-2">
                                   <input type="text" name="quSDivision" id="quSDivision_${new_row_no}" required title="Grade/Division" class="form-control" placeholder="Grade/Division">
                               </div>
                               <div class="form-group col-md-3">
                                   <input type="text" name="quSInstitute" id="quSInstitute_${new_row_no}" required title="Enter Institute" class="form-control" placeholder="Institute">
                               </div>
                           </div>`
        $('#new_quS').append(new_row_inputs);
        $('#total_quS').val(new_row_no);
    }
    function removeQualification() {
        let last_row_no = $('#total_quS').val();
        if (last_row_no > 1) {
            $('#SpouseQualification_' + last_row_no).remove();
            $('#total_quS').val(last_row_no - 1);
        }
    }
    // #endregion

    function addSpouseQualifications() {
        if ($("#formSpouseQualification").valid()) {
            let qualificationList = storeSpouseQualification();
            let qualifications = JSON.stringify(qualificationList);
            $.ajax({
                type: 'post',
                url: '/api/courseMembers/SpouseQualification',
                data: qualifications,
                contentType: "application/json; charset=utf-8",
                datatype: 'json',
                success: function (data, textStatus, xhr) {
                    toastr.info(textStatus);
                    displayTab('SpousePartial');
                },
                error: function () {
                    toastr.error('Operation Failed!');
                }
            });
        }
    }
</script>