@model IEnumerable<NDCWeb.Areas.Member.View_Models.CountryVisitIndxVM>

<div class="card">
    <div class="card-body">
        <table id="tblCountryVisit" class="table table-condensed table-bordered table-hover">
            <thead>
                <tr class="bg-light">
                    <td class="juipfname">@Html.DisplayNameFor(model => model.Country)</td>
                    <td class="juipfname">@Html.DisplayNameFor(model => model.YearOfVisit)</td>
                    <td class="juipfname">@Html.DisplayNameFor(model => model.Duration) </td>
                    <td class="juipfname">@Html.DisplayNameFor(model => model.Purpose) </td>
                    <td>Remove</td>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                <tr>
                    <td class="juipfvalue">@Html.DisplayFor(modelItem => item.Country)</td>
                    <td class="juipfvalue">@Html.DisplayFor(modelItem => item.YearOfVisit)</td>
                    <td class="juipfvalue">@Html.DisplayFor(modelItem => item.Duration)</td>
                    <td class="juipfvalue">@Html.DisplayFor(modelItem => item.Purpose)</td>
                    <td>
                        <button type="button" class="btn btn-transparent red btn-xs" onclick="removeCountryVisit(@item.CountryVisitId, this)"><i class="fa fa-trash"></i></button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
        <div class="panel-footer">
            <a class="btn jui-btn col-md-4 col-xs-12 btn-lg btn-info btnPrevious">Previous</a>
            <a class="btn jui-btn col-md-4 col-xs-12 btn-lg btn-success" onclick="addTab('CountryVisitPartial')">Edit</a>
            <a class="btn jui-btn col-md-4 col-xs-12 btn-lg btn-info btnNext">Next</a>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('.btnNext').click(function () {
            $('.nav-tabs .active').parent().next('li').find('a').trigger('click');
        });

        $('.btnPrevious').click(function () {
            $('.nav-tabs .active').parent().prev('li').find('a').trigger('click');
        });
    });

    function removeCountryVisit(id, event) {
        $.ajax({
            type: 'delete',
            url: '/api/courseMembers/CountryVisitDelete/' + id,
            datatype: 'json',
            success: function (data, textStatus, xhr) {
                if (textStatus === 'success') {
                    $(event).closest("tr").remove();
                }
            },
            error: function () {
                alert('Operation Failed!')
            }
        });
    }
</script>


