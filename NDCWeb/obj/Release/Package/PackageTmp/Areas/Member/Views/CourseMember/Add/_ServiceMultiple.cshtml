@model NDCWeb.Areas.Member.View_Models.CrsMbrAppointmentCrtVM
<style>
    .validation-summary-valid {
        display: none;
    }

    .required::before {
        content: "*";
        font-weight: bold;
        color: red;
    }
</style>
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formCMServices" }))
{
    @Html.AntiForgeryToken()

    { Html.RenderPartial("Add/ServiceAdd/_ServiceDetail"); }
    <br />
    { Html.RenderPartial("Add/ServiceAdd/_Qualification"); }
    <br />
    { Html.RenderPartial("Add/ServiceAdd/_CountryVisit"); }
    <br />
    { Html.RenderPartial("Add/ServiceAdd/_LanguagesKnown"); }
    <br />
    { Html.RenderPartial("Add/ServiceAdd/_ImportantAssignment"); }

    <div class="card-footer text-center">
        <input type="button" id="btnSave" value="Submit" onclick="servicesAdd()" class="btn btn-primary btn-lg" />
    </div>
    <div class="card-header">
        @Html.ValidationSummary(false, "Please fix the following error and then submit the form:-", new { @class = "text-danger" })
    </div>
}



<div class="panel-footer">
    <a class="btn jui-btn col-md-4 col-xs-12 btn-lg btn-info btnPrevious text-white">Previous</a>
    <a class="btn jui-btn col-md-4 col-xs-12 btn-lg btn-secondary" disabled>&nbsp;</a>
    <a class="btn jui-btn col-md-4 col-xs-12 btn-lg btn-info btnNext text-white">Next</a>
</div>

<script>
    $(document).ready(function () {
        $('.btnNext').click(function () {
            $('.nav-tabs .active').parent().next('li').find('a').trigger('click');
        });

        $('.btnPrevious').click(function () {
            $('.nav-tabs .active').parent().prev('li').find('a').trigger('click');
        });
    });

    function servicesAdd() {
        if ($("#formCMServices").valid()) {
            let appointment = fillAppointment();

            let qualificationList = storeQualification();
            //let qualifications = JSON.stringify(qualificationList);

            let countryVisitList = storeCountryVisit();
            //let countryVisits = JSON.stringify(countryVisitList);

            let languageList = storeLanguage();
            //let languages = JSON.stringify(languageList);

            let assignmentList = storeAppointment();
            //let assignments = JSON.stringify(assignmentList);

            let serviceList = {
                Appointment: appointment,
                Qualifications: qualificationList,
                CountryVisits: countryVisitList,
                Languages: languageList,
                ImportantAssignments: assignmentList,
            }
            let services = JSON.stringify(serviceList);

            $.ajax({
                type: 'post',
                url: '/api/courseMembers/ServiceMultiple',
                data: services,
                contentType: "application/json; charset=utf-8",
                datatype: 'json',
                success: function (data, textStatus, xhr) {
                    toastr.info(textStatus);
                    displayTab('ServicePartial');
                },
                error: function () {
                    toastr.error('something wents wrong!');
                }
            });
        }

    }


</script>